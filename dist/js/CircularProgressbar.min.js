/*!
 * CPB
 * Copyright 2020 CPB
 * Unauthorized copying of this file, via any medium is strictly prohibited.
 */ 
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,r,e){return r&&_defineProperties(t.prototype,r),e&&_defineProperties(t,e),t}function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r}function _wrapNativeSuper(t){var e="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(t){if(null===t||!_isNativeFunction(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,t)})(t)}function _construct(){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(t,r,e){var i=[null];i.push.apply(i,r);var o=new(Function.bind.apply(t,i));return e&&_setPrototypeOf(o,e.prototype),o}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _setPrototypeOf(t,r){return(_setPrototypeOf=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CircularProgressbar=function(r){function t(){var t=r.call(this)||this;return t.initValues(),t}_inheritsLoose(t,r);var e=t.prototype;return e.initValues=function(){this._id=t.generateId(),this._bDraw=!1,this._rotation=this._rotation||0,this._size=this._size||200,this._width=this._width||10,this._border=this._border||0,this._percent=this._percent||0,this._transitionDuration=this._transitionDuration||"0.3s",this._transitionType=this._transitionType||"none",this._fillColor=this._fillColor||"#5599ff",this._borderColor=this._borderColor||"#333",this._backgroundColor=this._backgroundColor||"#ccc"},e.onSizeChange=function(t){var r,e,i,o,n,s,a,h,c,u,d=parseInt(t);this._size=d,this._bDraw&&(this.isChrome?(r=this.svg.style,e=this.background.style,i=this.foreground.style,o=this.border.style,r.height=r.width=this.contSize,o.r=i.r=e.r=this.radius,o.cx=o.cy=e.cx=e.cy=i.cx=i.cy=this.contSize/2):((n=this.svg.style).height=n.width=this.contSize+"px",s=this.foreground,a=this.background,h=this.border,c=this.radius,u=this.contSize/2,s.setAttribute("r",c),s.setAttribute("cx",u),s.setAttribute("cy",u),a.setAttribute("r",c),a.setAttribute("cx",u),a.setAttribute("cy",u),h.setAttribute("r",c),h.setAttribute("cx",u),h.setAttribute("cy",u)),this.updateWidth())},e.onPercentChange=function(t){var r=parseFloat(t);isNaN(r)?console.warn("Invalid percent provided to circular progress bar"):(this._percent=100<r?100:r<0?0:r,this._bDraw&&(this.background.style.strokeDashoffset=this.fillWidth,this.foreground.style.strokeDashoffset=-this.perimeter+this.fillWidth))},e.onWidthChange=function(t){var r=parseFloat(t);isNaN(r)?console.warn("Invalid width provided to circular progress bar."):(this._width=r,this._bDraw&&this.updateWidth())},e.OnBorderChange=function(t){var r,e=parseInt(t);isNaN(e)?console.warn("Invalid border size provided to circular progress bar"):(this._border=e,this._bDraw&&((r=this.border.style).display=0<e?"block":"none",r.strokeWidth=this._width+2*this._border,this.onSizeChange(this._size)))},e.onTransitionChange=function(t){var r=t.split(" ");r.length<2||(this._transitionDuration=r[0],this._transitionType=r[1],this.updateTransition())},e.onTransitionDurationChange=function(t){this._transitionType=t,this.updateTransition()},e.onTransitionTypeChange=function(t){this._transitionDuration=t,this.updateTransition()},e.onBackgroundColorChange=function(t){null!=t&&(this._backgroundColor=t,this._bDraw&&(this.background.style.stroke=t))},e.onFillColorChange=function(t){this._fillColor=t,this._bDraw&&(this.foreground.style.stroke=t)},e.onBorderColorChange=function(t){this._borderColor=t,this._bDraw&&(this.border.style.stroke=t)},e.onRotationChange=function(t){this._rotation=t,this._bDraw&&(this.svg.style.transform="rotate("+this._rotation+"deg)")},e.updateTransition=function(){this._bDraw&&(this.border.style.transition=this.foreground.style.transition=this.background.style.transition=this._transitionDuration+" "+this._transitionType)},e.connectedCallback=function(){this.isChrome||this.initValues(),this.printHtml()},e.attributeChangedCallback=function(t,r,e){switch(t){case"size":this.onSizeChange(e);break;case"percent":this.onPercentChange(e);break;case"width":this.onWidthChange(e);break;case"border":this.OnBorderChange(e);break;case"animation":case"transition":this.onTransitionChange(e);break;case"transition-duration":case"animation-duration":this.onTransitionDurationChange(e);break;case"transition-type":case"animation-type":this.onTransitionTypeChange(e);break;case"background-color":this.onBackgroundColorChange(e);break;case"fill-color":this.onFillColorChange(e);break;case"border-color":this.onBorderColorChange(e);break;case"rotation":this.onRotationChange(e);break;default:console.warn("Unhandled property change : "+t)}},e.updateWidth=function(){var t=this.border.style,r=this.foreground.style,e=this.background.style;t.r=this.radius,t.strokeWidth=this._width+2*this._border,t.strokeDasharray=e.strokeDasharray=r.strokeDasharray=this.perimeter,e.strokeWidth=r.strokeWidth=this._width,e.r=r.r=this.radius,this.background.setAttribute("r",this.radius),this.foreground.setAttribute("r",this.radius),r.strokeDashoffset=-this.perimeter+this.fillWidth,e.strokeDashoffset=this.fillWidth},e.printHtml=function(){this._size;var t=this._width,r=this.radius,e=this._border,i=this.contSize,o=this._percent,n=this.perimeter,s=n*o/100,a=this.idBase;this.innerHTML='<svg id="'+a+'"width="'+i+'"height="'+i+'"xmlns="http://www.w3.org/2000/svg" viewPort="0 0 '+i+" "+i+'"version="1.1" transform="rotate('+this._rotation+')"style="transition:'+this._transitionDuration+" "+this._transitionType+'"><circle display="'+(0<e?"auto":"none")+'"class="cpb-border"id="'+a+'_border"r="'+r+'" cx="'+i/2+'"cy="'+i/2+'"stroke="'+this._borderColor+'"stroke-dasharray="'+n+'"stroke-dashoffset="0"stroke-width="'+(t+2*e)+'"fill="none"style="transition: '+this._transitionDuration+" "+this._transitionType+'"/><circle class="cpb-foreground"id="'+a+'_fill"r="'+r+'"cx="'+i/2+'"cy="'+i/2+'"stroke="'+this._fillColor+'"stroke-dasharray="'+n+'"stroke-dashoffset="'+(s-n)+'"stroke-width="'+t+'"fill="none"style="transition: '+this._transitionDuration+" "+this._transitionType+'"/><circle class="cpb-background"id="'+a+'_background"stroke-width="'+t+'"r="'+r+'"cx="'+i/2+'"cy="'+i/2+'"stroke="'+this._backgroundColor+'"stroke-dasharray="'+n+'"stroke-dashoffset="'+s+'"fill="none"style="transition: '+this._transitionDuration+" "+this._transitionType+'"/></svg>',this._bDraw=!0},_createClass(t,[{key:"idBase",get:function(){return"___pb_"+this._id}},{key:"background",get:function(){return document.getElementById(this.idBase+"_background")}},{key:"foreground",get:function(){return document.getElementById(this.idBase+"_fill")}},{key:"border",get:function(){return document.getElementById(this.idBase+"_border")}},{key:"svg",get:function(){return document.getElementById(this.idBase)}},{key:"isChrome",get:function(){return"object"===_typeof(window.chrome)&&-1===navigator.appVersion.indexOf("Edge")}},{key:"isEdge",get:function(){return/Edge/.test(navigator.userAgent)}},{key:"radius",get:function(){return(this._size-this._width)/2}},{key:"perimeter",get:function(){return this.radius*Math.PI*2}},{key:"fillWidth",get:function(){return this.perimeter*this._percent/100}},{key:"contSize",get:function(){return this._size+2*this._border}}],[{key:"observedAttributes",get:function(){return["size","percent","width","transition","border","animation","animation-duration","transition-duration","animation-type","transition-type","border-color","fill-color","background-color","rotation"]}}]),t}(_wrapNativeSuper(HTMLElement)),___pb_id=0;CircularProgressbar.generateId=function(){return ___pb_id++},window.customElements.define("circular-progressbar",CircularProgressbar);